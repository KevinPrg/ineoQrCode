{"ast":null,"code":"import _regeneratorRuntime from\"/home/psycho/Documents/ineoQrCode/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/psycho/Documents/ineoQrCode/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/home/psycho/Documents/ineoQrCode/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/psycho/Documents/ineoQrCode/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/psycho/Documents/ineoQrCode/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useContext}from'react';import{DataContext}from'../Context/DataContext';import'../App.css';var InputData=function InputData(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),errors=_useState2[0],setErrors=_useState2[1];var context=useContext(DataContext);var handleChange=function handleChange(e){if(e.target.name===\"data1\"){context.setData1(e.target.value);}if(e.target.name===\"data2\"){context.setData2(e.target.value);}if(e.target.name===\"data3\"){context.setData3(e.target.value);}};var findIndex=function findIndex(){if(props.index!==context.indexInput){context.setData1(\"\");context.setData2(\"\");context.setData3(\"\");}context.indexInput!==props.index&&context.setIndexInput(props.index);};var validData=function validData(){if(props.index===context.indexInput){if(context.result.length>=props.index){if(context.result[context.indexInput]){context.setResult(context.result.map(function(datas){return context.result[context.indexInput]===datas?_objectSpread(_objectSpread({},datas),{},{data3:context.data3,data2:context.data2,data1:context.data1}):datas;}));}else{context.setResult([].concat(_toConsumableArray(context.result),[{\"data3\":context.data3,\"data2\":context.data2,\"data1\":context.data1}]));setErrors(\"\");}}else{setErrors(\"le champs précédent n'est pas renseigné\");}}context.setData1(\"\");context.setData2(\"\");context.setData3(\"\");};var modifData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:context.setIndexInput(props.index);if(context.result[context.indexInput]){context.setData1(context.result[props.index].data1);context.setData2(context.result[props.index].data2);context.setData3(context.result[props.index].data3);}case 2:case\"end\":return _context.stop();}}},_callee);}));return function modifData(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"contain\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"poteau num\\xE9ro \",props.index+1,\": \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"separator\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputSolo\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"chamber\"+props.index,children:\"num\\xE9ro de chambre: \"}),/*#__PURE__*/_jsx(\"input\",{id:\"chamber\"+props.index,name:\"data1\",type:\"text\",placeholder:\"\",value:context.indexInput===props.index?context.data1:\"\",onChange:handleChange,onClick:function onClick(){return findIndex();}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputSolo\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"insee\"+props.index,children:\"code INSEE: \"}),/*#__PURE__*/_jsx(\"input\",{id:\"insee\"+props.index,name:\"data2\",type:\"text\",placeholder:\"\",value:context.indexInput===props.index?context.data2:\"\",onChange:handleChange,onClick:function onClick(){return findIndex();}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputSolo\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"poteau\"+props.index,children:\"num\\xE9ro poteau: \"}),/*#__PURE__*/_jsx(\"input\",{id:\"poteau\"+props.index,name:\"data3\",type:\"text\",placeholder:\"\",value:context.indexInput===props.index?context.data3:\"\",onChange:handleChange,onClick:function onClick(){return findIndex();}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return validData();},children:\"valider\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return modifData();},children:\"modifier\"})]}),errors!==\"\"&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:errors})]}),/*#__PURE__*/_jsx(\"div\",{className:\"saveResults\",children:context.result[props.index]&&/*#__PURE__*/_jsxs(\"div\",{className:\"results\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"donn\\xE9es sauvegard\\xE9es: \"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"num\\xE9ro de chambre: \",context.result[props.index].data1,\"  \"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"code INSEE: \",context.result[props.index].data2,\"  \"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"num\\xE9ro poteau: \",context.result[props.index].data3]})]})})]});};export default InputData;","map":{"version":3,"sources":["/home/psycho/Documents/ineoQrCode/src/Components/InputData.js"],"names":["React","useState","useContext","DataContext","InputData","props","errors","setErrors","context","handleChange","e","target","name","setData1","value","setData2","setData3","findIndex","index","indexInput","setIndexInput","validData","result","length","setResult","map","datas","data3","data2","data1","modifData"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react'\n\nimport { DataContext } from '../Context/DataContext'\nimport '../App.css'\n\nconst InputData = (props) => {\n\n  const [errors, setErrors] = useState(\"\")\n\n  const context = useContext(DataContext)\n\n  const handleChange = (e) => {\n    if (e.target.name === \"data1\") {\n      context.setData1(e.target.value)\n    } if (e.target.name === \"data2\") {\n      context.setData2(e.target.value)\n    } if (e.target.name === \"data3\") {\n      context.setData3(e.target.value)\n    }\n  }\n\n  const findIndex = () => {\n    if (props.index !== context.indexInput) {\n      context.setData1(\"\")\n      context.setData2(\"\")\n      context.setData3(\"\")\n    }\n    context.indexInput !== props.index && context.setIndexInput(props.index)\n  }\n\n  const validData = () => {\n    if (props.index === context.indexInput) {\n      if (context.result.length >= props.index) {\n        if (context.result[context.indexInput]) {\n          context.setResult(context.result.map(datas => context.result[context.indexInput] === datas ? { ...datas, data3: context.data3, data2: context.data2, data1: context.data1 } : datas))\n        } else {\n          context.setResult([...context.result, { \"data3\": context.data3, \"data2\": context.data2, \"data1\": context.data1 }])\n          setErrors(\"\")\n        }\n      }\n      else {\n        setErrors(\"le champs précédent n'est pas renseigné\")\n      }\n    }\n    context.setData1(\"\")\n    context.setData2(\"\")\n    context.setData3(\"\")\n  }\n\n  const modifData = async () => {\n    context.setIndexInput(props.index)\n    if (context.result[context.indexInput]) {\n      context.setData1(context.result[props.index].data1)\n      context.setData2(context.result[props.index].data2)\n      context.setData3(context.result[props.index].data3)\n    }\n  }\n\n\n  return (\n    <div className=\"contain\">\n      <p>poteau numéro {props.index + 1}: </p>\n      <div className=\"separator\">\n\n        <div className=\"inputs\">\n          <div className=\"inputSolo\">\n            <label htmlFor={\"chamber\" + props.index}>numéro de chambre: </label>\n            <input id={\"chamber\" + props.index} name=\"data1\" type=\"text\" placeholder=\"\" value={context.indexInput === props.index ? context.data1 : \"\"} onChange={handleChange} onClick={() => findIndex()} />\n          </div>\n          <div className=\"inputSolo\">\n            <label htmlFor={\"insee\" + props.index}>code INSEE: </label>\n            <input id={\"insee\" + props.index} name=\"data2\" type=\"text\" placeholder=\"\" value={context.indexInput === props.index ? context.data2 : \"\"} onChange={handleChange} onClick={() => findIndex()} />\n          </div>\n          <div className=\"inputSolo\">\n            <label htmlFor={\"poteau\" + props.index}>numéro poteau: </label>\n            <input id={\"poteau\" + props.index} name=\"data3\" type=\"text\" placeholder=\"\" value={context.indexInput === props.index ? context.data3 : \"\"} onChange={handleChange} onClick={() => findIndex()} />\n          </div>\n        </div>\n        <div className=\"buttons\">\n          <button onClick={() => validData()}>valider</button>\n          <button onClick={() => modifData()}>modifier</button>\n        </div>\n        {errors !== \"\" && <div className=\"error\" >{errors}</div>}\n      </div>\n      <div className=\"saveResults\">\n        {context.result[props.index] &&\n          <div className=\"results\">\n            <p>données sauvegardées: </p>\n            <p>numéro de chambre: {context.result[props.index].data1}  </p>\n            <p>code INSEE: {context.result[props.index].data2}  </p>\n            <p>numéro poteau: {context.result[props.index].data3}</p>\n          </div>\n        }\n      </div>\n\n\n    </div>\n  )\n}\n\nexport default InputData\n"]},"metadata":{},"sourceType":"module"}